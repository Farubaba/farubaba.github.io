<!DOCTYPE html>
<html>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="一、参考文档及源码下载maven webapp目录结构 Maven权威指南笔记 一步一步创建Maven多module项目 源代码下载地址：mobile-server 二、maven webapp目录结构12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152├──">
<meta name="keywords" content="Jetty,HTTPS,SSL,TLS,Http2,myeclipse,Maven,struts2,mobile-server,server">
<meta property="og:type" content="article">
<meta property="og:title" content="myeclipse、maven、struts2、Jetty创建mobile-server项目，为移动端开发提供后台服务。">
<meta property="og:url" content="http://yoursite.com/2018/08/04/myeclipse、maven、struts2创建server项目/index.html">
<meta property="og:site_name" content="Farubaba">
<meta property="og:description" content="一、参考文档及源码下载maven webapp目录结构 Maven权威指南笔记 一步一步创建Maven多module项目 源代码下载地址：mobile-server 二、maven webapp目录结构12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152├──">
<meta property="og:locale" content="default">
<meta property="og:image" content="http://yoursite.com/images/14、maven-child-module-not-exist.png">
<meta property="og:image" content="http://yoursite.com/images/15、remove-maven-webapp-default-sufix-MavenWebapp">
<meta property="og:updated_time" content="2018-09-09T06:38:44.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="myeclipse、maven、struts2、Jetty创建mobile-server项目，为移动端开发提供后台服务。">
<meta name="twitter:description" content="一、参考文档及源码下载maven webapp目录结构 Maven权威指南笔记 一步一步创建Maven多module项目 源代码下载地址：mobile-server 二、maven webapp目录结构12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152├──">
<meta name="twitter:image" content="http://yoursite.com/images/14、maven-child-module-not-exist.png">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>myeclipse、maven、struts2、Jetty创建mobile-server项目，为移动端开发提供后台服务。</title>
    <!-- styles -->
    <link rel="stylesheet" href="/css/style.css">
    <!-- persian styles -->
    
      <link rel="stylesheet" href="/css/rtl.css">
    
    <!-- rss -->
    
    
</head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="http://github.com/farubaba">Projects</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/2018/08/05/OkHttp入门/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="/2018/08/03/Coding一句话概念/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://yoursite.com/2018/08/04/myeclipse、maven、struts2创建server项目/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://yoursite.com/2018/08/04/myeclipse、maven、struts2创建server项目/&text=myeclipse、maven、struts2、Jetty创建mobile-server项目，为移动端开发提供后台服务。"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://yoursite.com/2018/08/04/myeclipse、maven、struts2创建server项目/&title=myeclipse、maven、struts2、Jetty创建mobile-server项目，为移动端开发提供后台服务。"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://yoursite.com/2018/08/04/myeclipse、maven、struts2创建server项目/&is_video=false&description=myeclipse、maven、struts2、Jetty创建mobile-server项目，为移动端开发提供后台服务。"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=myeclipse、maven、struts2、Jetty创建mobile-server项目，为移动端开发提供后台服务。&body=Check out this article: http://yoursite.com/2018/08/04/myeclipse、maven、struts2创建server项目/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://yoursite.com/2018/08/04/myeclipse、maven、struts2创建server项目/&title=myeclipse、maven、struts2、Jetty创建mobile-server项目，为移动端开发提供后台服务。"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://yoursite.com/2018/08/04/myeclipse、maven、struts2创建server项目/&title=myeclipse、maven、struts2、Jetty创建mobile-server项目，为移动端开发提供后台服务。"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://yoursite.com/2018/08/04/myeclipse、maven、struts2创建server项目/&title=myeclipse、maven、struts2、Jetty创建mobile-server项目，为移动端开发提供后台服务。"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://yoursite.com/2018/08/04/myeclipse、maven、struts2创建server项目/&title=myeclipse、maven、struts2、Jetty创建mobile-server项目，为移动端开发提供后台服务。"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://yoursite.com/2018/08/04/myeclipse、maven、struts2创建server项目/&name=myeclipse、maven、struts2、Jetty创建mobile-server项目，为移动端开发提供后台服务。&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#一、参考文档及源码下载"><span class="toc-number">1.</span> <span class="toc-text">一、参考文档及源码下载</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#二、maven-webapp目录结构"><span class="toc-number">2.</span> <span class="toc-text">二、maven webapp目录结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#三、Eclipse中使用maven-archetype-webapp创建maven-web项目"><span class="toc-number">3.</span> <span class="toc-text">三、Eclipse中使用maven-archetype-webapp创建maven web项目</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#四、定义webapp的contextPath"><span class="toc-number">4.</span> <span class="toc-text">四、定义webapp的contextPath</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#五、添加Servlet支持"><span class="toc-number">5.</span> <span class="toc-text">五、添加Servlet支持</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#六、修改index-jsp"><span class="toc-number">6.</span> <span class="toc-text">六、修改index.jsp</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#七、添加Jetty-maven-plugin"><span class="toc-number">7.</span> <span class="toc-text">七、添加Jetty maven plugin</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#八、添加Struts2和Log4j支持"><span class="toc-number">8.</span> <span class="toc-text">八、添加Struts2和Log4j支持</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#九、添加gson支持"><span class="toc-number">9.</span> <span class="toc-text">九、添加gson支持</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#十、根据maven-webapp目录结构，补全必要的目录"><span class="toc-number">10.</span> <span class="toc-text">十、根据maven webapp目录结构，补全必要的目录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#十一、编写login-jsp、LoginAction、LoginService、LoginDao并配置"><span class="toc-number">11.</span> <span class="toc-text">十一、编写login.jsp、LoginAction、LoginService、LoginDao并配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#十二、服务器端编程细节摘要"><span class="toc-number">12.</span> <span class="toc-text">十二、服务器端编程细节摘要</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#十三、编写服务端Action、Service、Dao，完整的代码已上传至github-mobile-server"><span class="toc-number">13.</span> <span class="toc-text">十三、编写服务端Action、Service、Dao，完整的代码已上传至github mobile-server</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#十四、错误修正"><span class="toc-number">14.</span> <span class="toc-text">十四、错误修正</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index my4">
        
        <header id="header">
  <a href="/">
  
    
      <div id="logo" style="background-image: url(/images/logo.png);"></div>
    
  
    <div id="title">
      <h1>Farubaba</h1>
    </div>
  </a>
  <div id="nav">
    <ul>
      <li class="icon">
        <a href="#"><i class="fas fa-bars fa-2x"></i></a>
      </li>
       
        <li><a href="/">Home</a></li>
       
        <li><a href="/archives/">Writing</a></li>
       
        <li><a href="http://github.com/farubaba">Projects</a></li>
      
    </ul>
  </div>
</header>


<article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        myeclipse、maven、struts2、Jetty创建mobile-server项目，为移动端开发提供后台服务。
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">Farubaba</span>
      </span>
      
    <div class="postdate">
        <time datetime="2018-08-04T15:41:56.000Z" itemprop="datePublished">2018-08-04</time>
    </div>


      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/tags/HTTPS/">HTTPS</a>, <a class="tag-link" href="/tags/Http2/">Http2</a>, <a class="tag-link" href="/tags/Jetty/">Jetty</a>, <a class="tag-link" href="/tags/Maven/">Maven</a>, <a class="tag-link" href="/tags/SSL/">SSL</a>, <a class="tag-link" href="/tags/TLS/">TLS</a>, <a class="tag-link" href="/tags/mobile-server/">mobile-server</a>, <a class="tag-link" href="/tags/myeclipse/">myeclipse</a>, <a class="tag-link" href="/tags/server/">server</a>, <a class="tag-link" href="/tags/struts2/">struts2</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <h3 id="一、参考文档及源码下载"><a href="#一、参考文档及源码下载" class="headerlink" title="一、参考文档及源码下载"></a>一、参考文档及源码下载</h3><p><a href="https://www.cnblogs.com/plxx/p/5256979.html" target="_blank" rel="noopener">maven webapp目录结构</a></p>
<p><a href="Maven权威指南笔记.md">Maven权威指南笔记</a></p>
<p><a href="https://blog.csdn.net/luoxiang183/article/details/76215635" target="_blank" rel="noopener">一步一步创建Maven多module项目</a></p>
<p>源代码下载地址：<a href="https://github.com/Farubaba/mobile-server.git" target="_blank" rel="noopener">mobile-server</a></p>
<h3 id="二、maven-webapp目录结构"><a href="#二、maven-webapp目录结构" class="headerlink" title="二、maven webapp目录结构"></a>二、maven webapp目录结构</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">├── pom.xml</span><br><span class="line">└── src</span><br><span class="line">    ├── main</span><br><span class="line">    │   ├── java</span><br><span class="line">    │   │   └── mygroup</span><br><span class="line">    │   │       ├── controller</span><br><span class="line">    │   │       │   ├── HomeController.java</span><br><span class="line">    │   │       │   └── PersonController.java</span><br><span class="line">    │   │       ├── dao</span><br><span class="line">    │   │       │   └── PersonDao.java</span><br><span class="line">    │   │       └── model</span><br><span class="line">    │   │           └── Person.java</span><br><span class="line">    │   ├── resources</span><br><span class="line">    │   │   ├── db.properties</span><br><span class="line">    │   │   ├── log4j.xml</span><br><span class="line">    │   │   ├── struts.xml</span><br><span class="line">    │   │   └── META-INF</span><br><span class="line">    │   │       └── persistence.xml</span><br><span class="line">    │   └── webapp</span><br><span class="line">    │       ├── index.jsp</span><br><span class="line">    │       ├── META-INF</span><br><span class="line">    │       │   ├── context.xml</span><br><span class="line">    │       │   └── MANIFEST.MF</span><br><span class="line">    │       ├── resources</span><br><span class="line">    │       │   └── css</span><br><span class="line">    │       │       └── screen.css</span><br><span class="line">    │       └── WEB-INF</span><br><span class="line">    │           ├── spring</span><br><span class="line">    │           │   ├── app</span><br><span class="line">    │           │   │   ├── controllers.xml</span><br><span class="line">    │           │   │   └── servlet-context.xml</span><br><span class="line">    │           │   ├── db.xml</span><br><span class="line">    │           │   └── root-context.xml</span><br><span class="line">    │           ├── views</span><br><span class="line">    │           │   ├── edit.jsp</span><br><span class="line">    │           │   ├── home.jsp</span><br><span class="line">    │           │   └── list.jsp</span><br><span class="line">    │           └── web.xml</span><br><span class="line">    └── test</span><br><span class="line">        ├── java</span><br><span class="line">        │   └── mygroup</span><br><span class="line">        │       ├── controller</span><br><span class="line">        │       │   ├── DataInitializer.java</span><br><span class="line">        │       │   ├── HomeControllerTest.java</span><br><span class="line">        │       │   └── PersonControllerTest.java</span><br><span class="line">        │       └── dao</span><br><span class="line">        │           └── PersonDaoTest.java</span><br><span class="line">        └── resources</span><br><span class="line">            ├── db.properties</span><br><span class="line">            ├── log4j.xml</span><br><span class="line">            ├── test-context.xml</span><br><span class="line">            └── test-db.xml</span><br></pre></td></tr></table></figure>
<h3 id="三、Eclipse中使用maven-archetype-webapp创建maven-web项目"><a href="#三、Eclipse中使用maven-archetype-webapp创建maven-web项目" class="headerlink" title="三、Eclipse中使用maven-archetype-webapp创建maven web项目"></a>三、Eclipse中使用maven-archetype-webapp创建maven web项目</h3><blockquote>
<p>File–&gt;New–&gt;Project–&gt;maven Project–&gt;选择maven-archetype-webapp–&gt;填写Group Id、Artifact Id、packageName等信息后–&gt;完成</p>
</blockquote>
<h3 id="四、定义webapp的contextPath"><a href="#四、定义webapp的contextPath" class="headerlink" title="四、定义webapp的contextPath"></a>四、定义webapp的contextPath</h3><p>在pom.xml文件中<build>下增加如下内容,其中mobile-server就是我们定义的contextPath</build></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;finalName&gt;mobile-server&lt;/finalName&gt;</span><br></pre></td></tr></table></figure>
<h3 id="五、添加Servlet支持"><a href="#五、添加Servlet支持" class="headerlink" title="五、添加Servlet支持"></a>五、添加Servlet支持</h3><p>pom.xml文件中添加：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">  &lt;groupId&gt;javax&lt;/groupId&gt;</span><br><span class="line">  &lt;artifactId&gt;javaee-api&lt;/artifactId&gt;</span><br><span class="line">  &lt;version&gt;7.0&lt;/version&gt;</span><br><span class="line">  &lt;scope&gt;provided&lt;/scope&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>
<h3 id="六、修改index-jsp"><a href="#六、修改index-jsp" class="headerlink" title="六、修改index.jsp"></a>六、修改index.jsp</h3><p>在src/main/webapp下添加/修改 index.jsp，内容如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot; pageEncoding=&quot;UTF-8&quot; %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Basic Struts 2 Application - Welcome&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;h1&gt;Welcome To Struts 2!&lt;/h1&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<h3 id="七、添加Jetty-maven-plugin"><a href="#七、添加Jetty-maven-plugin" class="headerlink" title="七、添加Jetty maven plugin"></a>七、添加Jetty maven plugin</h3><p>pom.xml文件中添加如下内容：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;plugin&gt;</span><br><span class="line">    &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;9.4.7.v20170914&lt;/version&gt;</span><br><span class="line">    &lt;configuration&gt;</span><br><span class="line">        &lt;webApp&gt;</span><br><span class="line">            &lt;contextPath&gt;/$&#123;project.build.finalName&#125;&lt;/contextPath&gt;</span><br><span class="line">        &lt;/webApp&gt;</span><br><span class="line">        &lt;stopKey&gt;CTRL+C&lt;/stopKey&gt;</span><br><span class="line">        &lt;stopPort&gt;8999&lt;/stopPort&gt;</span><br><span class="line">        &lt;scanIntervalSeconds&gt;10&lt;/scanIntervalSeconds&gt;</span><br><span class="line">        &lt;scanTargets&gt;</span><br><span class="line">            &lt;scanTarget&gt;src/main/webapp/WEB-INF/web.xml&lt;/scanTarget&gt;</span><br><span class="line">        &lt;/scanTargets&gt;</span><br><span class="line">    &lt;/configuration&gt;</span><br><span class="line">&lt;/plugin&gt;</span><br></pre></td></tr></table></figure>
<p>运行 mvn jetty:run，然后输入: <a href="http://localhost:8080/mobile-server/index.jsp" target="_blank" rel="noopener">http://localhost:8080/mobile-server/index.jsp</a> 访问页面,页面显示：Welcome To Struts 2! 则配置成功。</p>
<h3 id="八、添加Struts2和Log4j支持"><a href="#八、添加Struts2和Log4j支持" class="headerlink" title="八、添加Struts2和Log4j支持"></a>八、添加Struts2和Log4j支持</h3><ol>
<li>在\&lt;properties>下添加struts2和log4j的版本属性</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;properties&gt;</span><br><span class="line">	&lt;struts2.version&gt;2.5.14.1&lt;/struts2.version&gt;</span><br><span class="line">	&lt;log4j2.version&gt;2.10.0&lt;/log4j2.version&gt;</span><br><span class="line">&lt;/properties&gt;</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>在src/main/resources下创建log4j2.xml</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;Configuration&gt;</span><br><span class="line">    &lt;Appenders&gt;</span><br><span class="line">        &lt;Console name=&quot;STDOUT&quot; target=&quot;SYSTEM_OUT&quot;&gt;</span><br><span class="line">            &lt;PatternLayout pattern=&quot;%d %-5p [%t] %C&#123;2&#125; (%F:%L) - %m%n&quot;/&gt;</span><br><span class="line">        &lt;/Console&gt;</span><br><span class="line">    &lt;/Appenders&gt;</span><br><span class="line">    &lt;Loggers&gt;</span><br><span class="line">        &lt;Logger name=&quot;com.opensymphony.xwork2&quot; level=&quot;debug&quot;/&gt;</span><br><span class="line">        &lt;Logger name=&quot;org.apache.struts2&quot; level=&quot;debug&quot;/&gt;</span><br><span class="line">        &lt;Root level=&quot;warn&quot;&gt;</span><br><span class="line">            &lt;AppenderRef ref=&quot;STDOUT&quot;/&gt;</span><br><span class="line">        &lt;/Root&gt;</span><br><span class="line">    &lt;/Loggers&gt;</span><br><span class="line">&lt;/Configuration&gt;</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>配置dependencies</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;/dependencies&gt;</span><br><span class="line">	&lt;dependency&gt;</span><br><span class="line">	    &lt;groupId&gt;org.apache.struts&lt;/groupId&gt;</span><br><span class="line">	    &lt;artifactId&gt;struts2-core&lt;/artifactId&gt;</span><br><span class="line">	    &lt;!-- &lt;version&gt;$&#123;struts2.version&#125;&lt;/version&gt; --&gt;</span><br><span class="line">	&lt;/dependency&gt;</span><br><span class="line">	&lt;dependency&gt;</span><br><span class="line">	    &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;</span><br><span class="line">	    &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;</span><br><span class="line">	     &lt;!--&lt;version&gt;$&#123;log4j2.version&#125;&lt;/version&gt; --&gt;</span><br><span class="line">	&lt;/dependency&gt;</span><br><span class="line">	&lt;dependency&gt;</span><br><span class="line">	    &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;</span><br><span class="line">	    &lt;artifactId&gt;log4j-api&lt;/artifactId&gt;</span><br><span class="line">	     &lt;!-- &lt;version&gt;$&#123;log4j2.version&#125;&lt;/version&gt; --&gt;</span><br><span class="line">	&lt;/dependency&gt;</span><br><span class="line">&lt;/dependencies&gt;</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>增加dependencyManagement配置</li>
</ol>
<p>dependencyManagement用于在parent pom中统一管理module的版本version。如下，当child module中依赖struts时候，只需要在dependencies中加入 groupId和artifactId即可，version会自动从parent pom中继承。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependencyManagement&gt;</span><br><span class="line">	&lt;dependencies&gt;</span><br><span class="line">		&lt;dependency&gt;</span><br><span class="line">			&lt;groupId&gt;org.apache.struts&lt;/groupId&gt;</span><br><span class="line">			&lt;artifactId&gt;struts2-bom&lt;/artifactId&gt;</span><br><span class="line">			&lt;version&gt;$&#123;struts2.version&#125;&lt;/version&gt;</span><br><span class="line">			&lt;type&gt;pom&lt;/type&gt;</span><br><span class="line">			&lt;scope&gt;import&lt;/scope&gt;</span><br><span class="line">		&lt;/dependency&gt;</span><br><span class="line">		&lt;dependency&gt;</span><br><span class="line">			&lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;</span><br><span class="line">			&lt;artifactId&gt;log4j-bom&lt;/artifactId&gt;</span><br><span class="line">			&lt;version&gt;$&#123;log4j2.version&#125;&lt;/version&gt;</span><br><span class="line">			&lt;scope&gt;import&lt;/scope&gt;</span><br><span class="line">			&lt;type&gt;pom&lt;/type&gt;</span><br><span class="line">		&lt;/dependency&gt;</span><br><span class="line">	&lt;/dependencies&gt;</span><br><span class="line">&lt;/dependencyManagement&gt;</span><br></pre></td></tr></table></figure>
<ol start="5">
<li>修改web.xml文件</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;web-app id=&quot;WebApp_ID&quot; version=&quot;2.4&quot;</span><br><span class="line">	xmlns=&quot;http://java.sun.com/xml/ns/j2ee&quot; </span><br><span class="line">	xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">	xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd&quot;&gt;</span><br><span class="line">	&lt;display-name&gt;Basic Struts2&lt;/display-name&gt;</span><br><span class="line">	&lt;welcome-file-list&gt;</span><br><span class="line">		&lt;welcome-file&gt;index&lt;/welcome-file&gt;</span><br><span class="line">	&lt;/welcome-file-list&gt;</span><br><span class="line"></span><br><span class="line">	&lt;filter&gt;</span><br><span class="line">		&lt;filter-name&gt;struts2&lt;/filter-name&gt;</span><br><span class="line">		&lt;filter-class&gt;org.apache.struts2.dispatcher.filter.StrutsPrepareAndExecuteFilter&lt;/filter-class&gt;</span><br><span class="line">	&lt;/filter&gt;</span><br><span class="line"></span><br><span class="line">	&lt;filter-mapping&gt;</span><br><span class="line">		&lt;filter-name&gt;struts2&lt;/filter-name&gt;</span><br><span class="line">		&lt;url-pattern&gt;/*&lt;/url-pattern&gt;</span><br><span class="line">	&lt;/filter-mapping&gt;</span><br><span class="line"></span><br><span class="line">&lt;/web-app&gt;</span><br></pre></td></tr></table></figure>
<ol start="6">
<li>在src/main/resources下创建struts.xml文件</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;!DOCTYPE struts PUBLIC</span><br><span class="line">    &quot;-//Apache Software Foundation//DTD Struts Configuration 2.5//EN&quot;</span><br><span class="line">    &quot;http://struts.apache.org/dtds/struts-2.5.dtd&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;struts&gt;</span><br><span class="line"></span><br><span class="line">    &lt;constant name=&quot;struts.devMode&quot; value=&quot;true&quot; /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;package name=&quot;basicstruts2&quot; extends=&quot;struts-default&quot;&gt;</span><br><span class="line">        &lt;action name=&quot;index&quot;&gt;</span><br><span class="line">            &lt;result&gt;/index.jsp&lt;/result&gt;</span><br><span class="line">        &lt;/action&gt;</span><br><span class="line">    &lt;/package&gt;</span><br><span class="line"></span><br><span class="line">&lt;/struts&gt;</span><br></pre></td></tr></table></figure>
<ol start="7">
<li>执行 mvn jetty:run 然后访问<a href="http://localhost:8080/mobile-server/index.action" target="_blank" rel="noopener">http://localhost:8080/mobile-server/index.action</a>出现和之前<a href="http://localhost:8080/mobile-server/index.jsp" target="_blank" rel="noopener">http://localhost:8080/mobile-server/index.jsp</a>一样的界面，则说明struts2配置成功。</li>
</ol>
<h3 id="九、添加gson支持"><a href="#九、添加gson支持" class="headerlink" title="九、添加gson支持"></a>九、添加gson支持</h3><p>为了方便的构建JSON字符串，模拟接口请求返回，引入Gson。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">  &lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;</span><br><span class="line">  &lt;artifactId&gt;gson&lt;/artifactId&gt;</span><br><span class="line">  &lt;version&gt;2.8.5&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>
<h3 id="十、根据maven-webapp目录结构，补全必要的目录"><a href="#十、根据maven-webapp目录结构，补全必要的目录" class="headerlink" title="十、根据maven webapp目录结构，补全必要的目录"></a>十、根据maven webapp目录结构，补全必要的目录</h3><p>创建相关代码资源目录和package, (创建代码目录时，需要先创建普通目录，然后用eclipse转化成代码目录：build path -&gt; use as source folder)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">src/test/java</span><br><span class="line">src/test/resource</span><br><span class="line">src/main/webapp/resources</span><br><span class="line">src/main/webapp/java</span><br><span class="line"></span><br><span class="line">com.farubaba.mobile.server.action</span><br><span class="line">com.farubaba.mobile.server.service</span><br><span class="line">com.farubaba.mobile.server.dao</span><br><span class="line">com.farubaba.mobile.server.modle</span><br></pre></td></tr></table></figure>
<h3 id="十一、编写login-jsp、LoginAction、LoginService、LoginDao并配置"><a href="#十一、编写login-jsp、LoginAction、LoginService、LoginDao并配置" class="headerlink" title="十一、编写login.jsp、LoginAction、LoginService、LoginDao并配置"></a>十一、编写login.jsp、LoginAction、LoginService、LoginDao并配置</h3><ol>
<li>pom.xml添加jstl支持</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;jstl&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;jstl&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;1.2&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>
<ol>
<li>index.jsp中添加访问login.action的超链接</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ol</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">li</span>&gt;</span>通过 login.action 访问 (没有给userName和password参数) : <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"&lt;s:url action='login'/&gt;"</span>&gt;</span>[mobile-server/WEB-INF/resources/jsp/login.jsp]<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ol start="2">
<li>在login.jsp中使用带参数的login.action</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot; pageEncoding=&quot;UTF-8&quot; %&gt;</span><br><span class="line">&lt;%@ page import=&quot;com.google.gson.GsonBuilder&quot;%&gt;</span><br><span class="line">&lt;%@ page import=&quot;com.google.gson.Gson&quot; %&gt;</span><br><span class="line">&lt;%@ page import=&quot;com.farubaba.mobile.server.model.User&quot; %&gt;</span><br><span class="line">&lt;%@ taglib prefix=&quot;s&quot; uri=&quot;/struts-tags&quot; %&gt;</span><br><span class="line">&lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; %&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;%</span><br><span class="line">String path = request.getContextPath();</span><br><span class="line">String basePath = request.getScheme()+&quot;://&quot;+request.getServerName()+&quot;:&quot;+request.getServerPort()+path+&quot;/&quot;;</span><br><span class="line">String pageName = pageContext.getPage().getClass().getSimpleName();</span><br><span class="line">%&gt;</span><br><span class="line"></span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Hello World! Struts2&lt;/title&gt;</span><br><span class="line">    &lt;style type=&quot;text/css&quot;&gt;</span><br><span class="line">    	.button&#123;</span><br><span class="line">    		width:300px;</span><br><span class="line">    		height:30px;</span><br><span class="line">    		text-size:26pt;</span><br><span class="line">    		text-align:center;</span><br><span class="line">    		background-color:#2bbc8a;</span><br><span class="line">    	&#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;  	</span><br><span class="line">  	&lt;h2&gt;</span><br><span class="line">  		&lt;%= pageName.replace(&quot;_002d&quot;, &quot;-&quot;).replace(&quot;_&quot;, &quot;.&quot;) %&gt; :		</span><br><span class="line">  	&lt;/h2&gt;</span><br><span class="line">  	&lt;h4&gt;查看地址栏Url，如果没有给userName和password参数，则并不会返回User对象，下面也不会有值显示：&lt;/h4&gt;</span><br><span class="line">  	&lt;h4&gt;JSON String User: [jsonUser] = &lt;s:property value=&quot;jsonUser&quot; /&gt;&lt;/h4&gt;</span><br><span class="line">  	&lt;h4&gt;Object User: [user] = &lt;s:property value=&quot;user&quot; /&gt;&lt;/h4&gt;</span><br><span class="line">  	&lt;p&gt;getServletName = &lt;%= getServletName() %&gt;&lt;/p&gt;</span><br><span class="line">  	&lt;p&gt;getServletInfo = &lt;%= getServletInfo() %&gt;&lt;/p&gt;</span><br><span class="line">  	&lt;p&gt;getServletContext.getAttribute() = &lt;%= getServletContext().getAttribute(&quot;jsonUser&quot;) %&gt;&lt;/p&gt; </span><br><span class="line">    &lt;!--</span><br><span class="line">    定义url action 和 param </span><br><span class="line">     --&gt;</span><br><span class="line">     &lt;s:url var=&quot;loginWithNoParam&quot; action=&quot;login&quot;&gt;&lt;/s:url&gt;</span><br><span class="line">   	</span><br><span class="line">   	&lt;s:url var=&quot;login&quot; action=&quot;login&quot;&gt;</span><br><span class="line">   		&lt;s:param name=&quot;userName&quot;&gt;farubaba&lt;/s:param&gt;</span><br><span class="line">   		&lt;s:param name=&quot;password&quot;&gt;123456&lt;/s:param&gt;</span><br><span class="line">   	&lt;/s:url&gt;</span><br><span class="line">   	 </span><br><span class="line">   	&lt;s:url var=&quot;userlogin&quot; action=&quot;userLogin&quot; &gt;</span><br><span class="line">   		&lt;s:param name=&quot;userName&quot;&gt;farubaba&lt;/s:param&gt;</span><br><span class="line">   		&lt;s:param name=&quot;password&quot;&gt;123456&lt;/s:param&gt;</span><br><span class="line">   	&lt;/s:url&gt;</span><br><span class="line">   	</span><br><span class="line">   	&lt;s:url var=&quot;userlogin&quot; action=&quot;userLogin&quot; &gt;</span><br><span class="line">   		&lt;s:param name=&quot;userName&quot;&gt;farubaba&lt;/s:param&gt;</span><br><span class="line">   		&lt;s:param name=&quot;password&quot;&gt;123456&lt;/s:param&gt;</span><br><span class="line">   	&lt;/s:url&gt;</span><br><span class="line">   	</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">    	&lt;li&gt;没有登陆参数，调用 &lt;a href=&quot;$&#123;loginWithNoParam&#125;&quot;&gt;login.action -&gt; return null String&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">    	&lt;li&gt;提供正确登录参数，调用 &lt;a href=&quot;$&#123;login&#125;&quot;&gt;login.action -&gt; return JSON String User&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">    	&lt;li&gt;提供正确登录参数，调用&lt;a href=&quot;$&#123;userlogin&#125;&quot;&gt;userLogin.action -&gt; return Object User &lt;/a&gt;&lt;/li&gt;</span><br><span class="line">    	&lt;li&gt;</span><br><span class="line">    	使用form表单提交登录：(输入：&lt;font color=&quot;red&quot;&gt;farubaba&lt;/font&gt; 和 &lt;font color=&quot;red&quot;&gt;123456&lt;/font&gt; 可登录成功!登录成功后，JSON String User 和 Object User其中之一会有值)</span><br><span class="line">	    &lt;s:form action=&quot;login&quot;&gt;</span><br><span class="line">		 	&lt;s:textfield name=&quot;userName&quot; label=&quot;Your name&quot; /&gt;</span><br><span class="line">		 	&lt;s:textfield name=&quot;password&quot; label=&quot;Your password&quot; /&gt;</span><br><span class="line">		 	&lt;s:submit value=&quot;登录&quot; cssClass=&quot;button&quot; /&gt;</span><br><span class="line">		&lt;/s:form&gt;</span><br><span class="line">    	&lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">    &lt;p&gt;&lt;p&gt;&lt;p&gt;&lt;s:include value=&quot;../../road-map.jsp&quot;&gt;&lt;/s:include&gt;</span><br><span class="line">   </span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<h3 id="十二、服务器端编程细节摘要"><a href="#十二、服务器端编程细节摘要" class="headerlink" title="十二、服务器端编程细节摘要"></a>十二、服务器端编程细节摘要</h3><table>
<thead>
<tr>
<th>功能</th>
<th>解决方案</th>
</tr>
</thead>
<tbody>
<tr>
<td>读取request中postbody</td>
<td>1.使用request.getInputStream()</td>
</tr>
<tr>
<td>struts action中读写文件</td>
<td>1.获得文件路径：String path = ServletActionContext.getServletContext().getRealPath(“/resources/files/test.md”);<br>生成绝对路径如：/environment/git-repo/mobile-server/src/main/webapp/resources/files/test.md</td>
</tr>
</tbody>
</table>
<h3 id="十三、编写服务端Action、Service、Dao，完整的代码已上传至github-mobile-server"><a href="#十三、编写服务端Action、Service、Dao，完整的代码已上传至github-mobile-server" class="headerlink" title="十三、编写服务端Action、Service、Dao，完整的代码已上传至github mobile-server"></a>十三、编写服务端Action、Service、Dao，完整的代码已上传至github <a href="https://github.com/Farubaba/mobile-server.git" target="_blank" rel="noopener">mobile-server</a></h3><h3 id="十四、错误修正"><a href="#十四、错误修正" class="headerlink" title="十四、错误修正"></a>十四、错误修正</h3><ol>
<li><p>可能出现/struts-tags 找不到的错误。</p>
<pre><code>myeclipse Can not find the tag library descriptor for &quot;/struts- tags&quot;

右键project--&gt;build path--&gt;Configure build path--&gt;order and export
勾选Maven dependencies ， 点击应用。
</code></pre></li>
<li><p>web.xml web-app dtd版本错误</p>
<pre><code>One or more constraints have not been satisfied. Apache Struts (2.x) 2.1 req
</code></pre></li>
</ol>
<p>web.xml中替换如下内容：</p>
<pre><code>&lt;!-- &lt;!DOCTYPE web-app PUBLIC
 &quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot;
 &quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot; &gt; --&gt;
</code></pre><p>替换为：</p>
<pre><code>&lt;web-app 
    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
    xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot;
    xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd&quot;
    version=&quot;3.0&quot; id=&quot;WebApp_1536392245753&quot;&gt;
</code></pre><ol start="3">
<li>child module does not exist</li>
</ol>
<div align="center"><br>    <img src="/images/14、maven-child-module-not-exist.png" width="90%"><br></div>

<ol start="4">
<li>去掉webapp项目创建时自带的后缀: Maven Webapp , 例如 api-feature Maven Webapp 修改成 api-feature <div align="center"><br> <img src="/images/15、remove-maven-webapp-default-sufix-MavenWebapp" width="90%"><br></div>



</li>
</ol>

  </div>
</article>

    <div class="blog-post-comments">
        <div id="disqus_thread">
            <noscript>Please enable JavaScript to view the comments.</noscript>
        </div>
    </div>



    </div>
    
      <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="http://github.com/farubaba">Projects</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#一、参考文档及源码下载"><span class="toc-number">1.</span> <span class="toc-text">一、参考文档及源码下载</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#二、maven-webapp目录结构"><span class="toc-number">2.</span> <span class="toc-text">二、maven webapp目录结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#三、Eclipse中使用maven-archetype-webapp创建maven-web项目"><span class="toc-number">3.</span> <span class="toc-text">三、Eclipse中使用maven-archetype-webapp创建maven web项目</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#四、定义webapp的contextPath"><span class="toc-number">4.</span> <span class="toc-text">四、定义webapp的contextPath</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#五、添加Servlet支持"><span class="toc-number">5.</span> <span class="toc-text">五、添加Servlet支持</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#六、修改index-jsp"><span class="toc-number">6.</span> <span class="toc-text">六、修改index.jsp</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#七、添加Jetty-maven-plugin"><span class="toc-number">7.</span> <span class="toc-text">七、添加Jetty maven plugin</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#八、添加Struts2和Log4j支持"><span class="toc-number">8.</span> <span class="toc-text">八、添加Struts2和Log4j支持</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#九、添加gson支持"><span class="toc-number">9.</span> <span class="toc-text">九、添加gson支持</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#十、根据maven-webapp目录结构，补全必要的目录"><span class="toc-number">10.</span> <span class="toc-text">十、根据maven webapp目录结构，补全必要的目录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#十一、编写login-jsp、LoginAction、LoginService、LoginDao并配置"><span class="toc-number">11.</span> <span class="toc-text">十一、编写login.jsp、LoginAction、LoginService、LoginDao并配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#十二、服务器端编程细节摘要"><span class="toc-number">12.</span> <span class="toc-text">十二、服务器端编程细节摘要</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#十三、编写服务端Action、Service、Dao，完整的代码已上传至github-mobile-server"><span class="toc-number">13.</span> <span class="toc-text">十三、编写服务端Action、Service、Dao，完整的代码已上传至github mobile-server</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#十四、错误修正"><span class="toc-number">14.</span> <span class="toc-text">十四、错误修正</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://yoursite.com/2018/08/04/myeclipse、maven、struts2创建server项目/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://yoursite.com/2018/08/04/myeclipse、maven、struts2创建server项目/&text=myeclipse、maven、struts2、Jetty创建mobile-server项目，为移动端开发提供后台服务。"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://yoursite.com/2018/08/04/myeclipse、maven、struts2创建server项目/&title=myeclipse、maven、struts2、Jetty创建mobile-server项目，为移动端开发提供后台服务。"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://yoursite.com/2018/08/04/myeclipse、maven、struts2创建server项目/&is_video=false&description=myeclipse、maven、struts2、Jetty创建mobile-server项目，为移动端开发提供后台服务。"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=myeclipse、maven、struts2、Jetty创建mobile-server项目，为移动端开发提供后台服务。&body=Check out this article: http://yoursite.com/2018/08/04/myeclipse、maven、struts2创建server项目/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://yoursite.com/2018/08/04/myeclipse、maven、struts2创建server项目/&title=myeclipse、maven、struts2、Jetty创建mobile-server项目，为移动端开发提供后台服务。"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://yoursite.com/2018/08/04/myeclipse、maven、struts2创建server项目/&title=myeclipse、maven、struts2、Jetty创建mobile-server项目，为移动端开发提供后台服务。"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://yoursite.com/2018/08/04/myeclipse、maven、struts2创建server项目/&title=myeclipse、maven、struts2、Jetty创建mobile-server项目，为移动端开发提供后台服务。"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://yoursite.com/2018/08/04/myeclipse、maven、struts2创建server项目/&title=myeclipse、maven、struts2、Jetty创建mobile-server项目，为移动端开发提供后台服务。"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://yoursite.com/2018/08/04/myeclipse、maven、struts2创建server项目/&name=myeclipse、maven、struts2、Jetty创建mobile-server项目，为移动端开发提供后台服务。&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

    
    <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2019 Farubaba
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="http://github.com/farubaba">Projects</a></li>
        
      </ul>
    </nav>
  </div>
</footer>


    <!-- Start of LiveChat (www.livechatinc.com) code -->
    <script type="text/javascript">
      window.__lc = window.__lc || {};
      window.__lc.license = 11335842;
      (function() {
        var lc = document.createElement('script'); lc.type = 'text/javascript'; lc.async = true;
        lc.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'cdn.livechatinc.com/tracking.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(lc, s);
      })();
    </script>
    <noscript>
    <a href="https://www.livechatinc.com/chat-with/11335842/" rel="nofollow">Chat with us</a>,
    powered by <a href="https://www.livechatinc.com/?welcome" rel="noopener nofollow" target="_blank">LiveChat</a>
    </noscript>
    <!-- End of LiveChat code -->

</body>
</html>
<!-- styles -->
<link rel="stylesheet" href="/lib/font-awesome/css/fontawesome-all.min.css">
<link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css">

<!-- jquery -->
<script src="/lib/jquery/jquery.min.js"></script>
<script src="/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>
<script src="/js/main.js"></script>

<!-- search -->

<!-- Google Analytics -->

<!-- Baidu Analytics -->

<!-- Disqus Comments -->

    <script type="text/javascript">
        var disqus_shortname = 'cactus-1';

        (function(){
            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        }());
    </script>


